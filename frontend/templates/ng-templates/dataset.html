[% set active='main' %]
[% extends "ng-templates/dataset-base.jj2" %]
[% block controller %]datasetController[% endblock %]
[% block contents %]
<div class="row dataset-row">
    <div class="col-sm-12">
        <div class="dataset-panel">
             <div class="dataset-body">
                 <div ng-if="ctrl.dataset.hasImage">
                     <img ng-src="/api/dataset/{{ctrl.dataset.shortName}}/logo" class="dataset-logo" alt='{{ dataset.shortName }} logo' />
                 </div>
                 <div ng-bind-html="ctrl.dataset.version.description" />
             </div>
        </div>
    </div>
</div>
<div class="row dataset-row">
    <div class="col-md-4">
        <div class="dataset-panel dataset-infobox">
            <div class="dataset-heading">Dataset</div>
            <div class="dataset-body">
                Overview
                <ul>
                   <li ng-if="ctrl.dataset.seqType">Sequencing type: {{ ctrl.dataset.seqType }}
                   <li ng-if="ctrl.dataset.seqTech">Sequencing tech: {{ ctrl.dataset.seqTech }}
                   <li ng-if="ctrl.dataset.avgSeqDepth">Average Sequencing Depth: {{ctrl.dataset.avgSeqDepth }}
                   <li ng-if="ctrl.dataset.seqCenter">Sequencing Center: {{ ctrl.dataset.seqCenter }}
                   <li ng-if="ctrl.dataset.datasetSize">Dataset Size: {{ ctrl.dataset.datasetSize }}
                   <li ng-if="ctrl.dataset.version.varCallRef">Variant Calling reference: {{ ctrl.dataset.version.varCallRef }}
                   <li ng-if="ctrl.dataset.version.refDoi">Dataset DOI: <a href="https://dx.doi.org/{{ ctrl.dataset.version.refDoi }}">{{ ctrl.dataset.version.refDoi }}</a>
                </ul>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="dataset-panel dataset-infobox">
            <div class="dataset-heading">Study</div>
            <div class="dataset-body">
                {{ctrl.study.title}}
                <ul>
                   <li ng-if="ctrl.study.piName">Principal Investigator: {{ ctrl.study.piName }}
                   <li ng-if="ctrl.study.refDoi">DOI: <a href="https://dx.doi.org/{{ ctrl.study.refDoi }}">{{ ctrl.study.refDoi }}</a>
                   <li ng-if="ctrl.study.publicationDate">Publication date: {{ctrl.study.publicationDate }}
                   <li ng-if="ctrl.study.contactEmail">Contact: <a href="mailto:{{ctrl.study.contactEmail}}">{{ ctrl.study.contactNameUc }}</a>
                   <li ng-if="ctrl.study.description">Description: {{ ctrl.study.description }}
                </ul>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="dataset-panel dataset-infobox">
            <div class="dataset-heading">Collection</div>
            <div class="dataset-body">
                <div ng-repeat="(name, coll) in ctrl.collections">
                    {{ name }} <span class='ethnicity'>{{coll.ethnicity}}</span>
                    <ul ng-repeat="sample in coll.sampleSets" class='samples'>
                        <li>Sample size: {{ sample.sampleSize }}</li>
                        <li>Phenotype: {{ sample.phenotype }}</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
[% endblock %]
