<!-- home.html -->
<div ng-controller="sweFreqController as sweFreqCtrl">
  <br />
  <br />
  <div class="col-xs-2"></div>
  <div ng-if="sweFreqCtrl.data.admin == false">
    <div class="jumbotron">
      <div class="container">
        <img src="/javascript/swegen_logo_v1_trans_400.png"
             class="big-swegen-logo" />
        <h2>SweGen Variant Frequency Database</h2>
        <div ng-if="sweFreqCtrl.data.trusted == false">
          <p>This server hosts whole-genome variant frequencies for 1000
          Swedish individuals generated within the SweGen project. The
          frequency data is intended to be used as a resource for the research
          community and clinical genetics laboratories. Individual positions in
          the genome can be viewed using the Data Beacon or ExAC Browser by
          clicking the links above. To access the variant frequency file you
          need to register.</p>
          <p>Please note that the 1000 individuals included in the SweGen
          project represent a cross-section of the Swedish population and that
          no disease information has been used for the selection. The frequency
          data may therefore include genetic variants that are associated with,
          or causative of, disease.</p>
          <p>We request that any use of data from the SweGen project cite this
          preprint on bioRxiv.</p>
        </div>
      </div>
    </div>
  </div>
  <div ng-if="sweFreqCtrl.data.admin == true">
    <div class="col-xs-1"></div>
    <div class="col-xs-10">
      <div id="exTab2"
           class="container">
        <ul class="nav nav-tabs">
          <li class="active">
            <a data-target="#requestList"
               data-toggle="tab">Pending requests</a>
          </li>
          <li>
            <a data-target="#allUsers"
               data-toggle="tab">Approved users</a>
          </li>
          <li>
            <a data-target="#emailList"
               data-toggle="tab">Email-list</a>
          </li>
        </ul>
        <div class="tab-content">
          <div class="tab-pane active"
               id="requestList">
            <div class="col-xs-12">
              <br />
              <br />
              <div class="row">
                <label class="col-md-3">Name</label>
                <label class="col-md-3">E-mail</label>
                <label class="col-md-2">Affiliation</label>
                <label class="col-md-2">Country</label>
                <label class="col-md-2">Applied date</label>
              </div>
              <div ng-repeat="row in sweFreqCtrl.data.requests"
                   ng-class-odd="'odd'"
                   ng-class-even="'even'">
                <div class="row top-buffer">
                  <div class="col-md-3">
                  <div class="btn btn-primary btn-xs"
                       data-toggle="tooltip"
                       title="Give the user access"
                       ng-click="sweFreqCtrl.approvedUser(row)">Approve</div>
                  <div class="btn btn-danger btn-xs"
                       data-toggle="tooltip"
                       title="Delete from the database"
                       ng-click="sweFreqCtrl.denyUser(row)">
                       Delete</div>{{row.user}}</div>
                  <div class="col-md-3 alignment">{{row.email}}</div>
                  <div class="col-md-2 alignment">{{row.affiliation}}</div>
                  <div class="col-md-2 alignment">{{row.country}}</div>
                  <div class="col-md-2 alignment">{{row.applyDate}}</div>
                </div>
              </div>
            </div>
          </div>
          <div class="tab-pane"
               id="allUsers">
            <div class="col-xs-12">
              <br />
              <br />
              <div class="row">
                <label class="col-md-3">Name</label>
                <label class="col-md-3">E-mail</label>
                <label class="col-md-2">Affiliation</label>
                <label class="col-md-2">Country</label>
                <label class="col-md-2">Download count</label>
              </div>
              <div ng-repeat="row in sweFreqCtrl.data.approvedUsers"
                   ng-class-odd="'odd'"
                   ng-class-even="'even'">
                <div class="row top-buffer">
                  <div class="col-md-3">
                  <div class="btn btn-danger btn-xs"
                       data-toggle="tooltip"
                       title="Make the user pending again"
                       ng-click="sweFreqCtrl.deleteUser(row)">
                       Revoke</div>{{row.user}}</div>
                  <div class="col-md-3 alignment">{{row.email}}</div>
                  <div class="col-md-2 alignment">{{row.affiliation}}</div>
                  <div class="col-md-2 alignment">{{row.country}}</div>
                  <div class="col-md-2 alignment">{{row.downloadCount}}</div>
                </div>
              </div>
            </div>
          </div>
          <div class="tab-pane"
               id="emailList">
            <br />
            <div class="row">
              <div class="col-xs-1"></div>
              <div class="col-xs-10">
                <span ng-repeat="email in sweFreqCtrl.data.emails">
                  {{email}}{{$last ? '' : ', '}}
                </span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="row"></div>
</div>
