language: python
python:
    - "3.5"
services:
    - docker
before_install:
    - docker pull mysql:5.7
    - docker run --name mysql -e MYSQL_ALLOW_EMPTY_PASSWORD=1 -d -p 3306:3306  mysql:5.7
    - mysql -u root -h 127.0.0.1 -e 'CREATE DATABASE swefreq;'
install:
    - pip install -r tornado/requirements.txt
script:
    - cp settings_sample.json settings.json
    - cd tornado
    - bash ../test/01_daemon_starts.sh
    - cd ..
    - mysql -u root -h 127.0.0.1 swefreq < sql/swefreq.sql
